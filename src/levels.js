// src/levels.js

export const ROOM_SIZE = 16;
export const TILE_SIZE = 32;
export const ROOM_PIXEL = ROOM_SIZE * TILE_SIZE;

// Legend:
//  '.' empty
//  '#' solid
//  'C' coin
//  'S' spawn (only used once per level)
//  'D' door (final exit)
//  'B' bounce pad (solid)
//  'P' pressure plate (solid; can open gates)
//  'G' gate (solid when closed)
//  '^','v','<','>' wind zones (non-solid)
//  'M','V' moving-platform endpoints (path markers)

function roomFrom(rows) {
  if (rows.length !== ROOM_SIZE) throw new Error("Room must be 16 rows");
  return rows.map(r => r.padEnd(ROOM_SIZE, ".").slice(0, ROOM_SIZE));
}


function placedRoom(x, y, rows) {
  return { x, y, grid: roomFrom(rows) };
}


const L1 = [

  placedRoom(0, 0, [
    "................",
    "................",
    ".....C..........",
    "................",
    ".....###........",
    "................",
    "....^...........",
    "................",
    "..C.......###...",
    "................",
    "..........C.....",
    ".......###......",
    "................",
    "..S...........PG",
    "################",
    "################",
  ]),

  placedRoom(1, 0, [
    "#..##########..#",
    "#..............#",
    "#.....C........#",
    "#..............#",
    "#....###.......#",
    "#..............#",
    "#..M......V....#",
    "#..............#",
    "#........C.....#",
    "#......B.......#",
    "#..............#",
    "#....####......#",
    "#..............#",
    "#..............#",
    "#..............#",
    "#..##########..#",
  ]),

  placedRoom(2, 0, [
    "#..##########..#",
    "#..............#",
    "#..C...........#",
    "#..............#",
    "#....####......#",
    "#..............#",
    "#....^.........#",
    "#..............#",
    "#..M......V....#",
    "#..............#",
    "#.......B......#",
    "#........C.....#",
    "#..............#",
    "#..............#",
    "#..............#",
    "#..##########..#",
  ]),

  placedRoom(3, 0, [
    "................",
    "................",
    "....C...........",
    "................",
    "......###.......",
    "................",
    "...........C....",
    "................",
    "....###.........",
    "................",
    "................",
    "......M..V......",
    "..........D.....",
    ".....B..###.....",
    "######....######",
    "######....######",
  ]),
];


const L2 = [
  placedRoom(0, 0, [
    "................",
    "................",
    "..........C.....",
    "................",
    "....###.........",
    "................",
    "......###.......",
    ".....C..........",
    "................",
    "................",
    "........####....",
    "................",
    "................",
    "S...............",
    "################",
    "################",
  ]),

  placedRoom(1, 0, [
    "................",
    "....C...........",
    "................",
    ".....###........",
    "................",
    "...........B....",
    "................",
    ".........^......",
    "................",
    "....###.........",
    "................",
    ".........B......",
    "################",
    "################",
    "################",
    "################",
  ]),

  placedRoom(2, 0, [
    "................",
    "................",
    ".....C..........",
    "................",
    ".....###........",
    ".............v..",
    ".....#.......v..",
    ".....#.......v..",
    ".....#..........",
    ".....#..###.....",
    ".....#..........",
    ".....#..C.......",
    ".....#..........",
    ".....####....###",
    ".....###......###",
    "###########..###",
  ]),

  placedRoom(2, 1, [
    "################",
    "################",
    "####P.......####",
    "####..C.....####",
    "####........####",
    "####.....B..####",
    "####........####",
    "..........C.####",
    "GGGG........####",
    "####..###...####",
    "####........####",
    "####..M...V.####",
    "####........####",
    "####........####",
    "################",
    "################",
  ]),

  placedRoom(3, 1, [
    "................",
    "................",
    ".....C..........",
    "................",
    "...###..........",
    "................",
    ".............C..",
    "................",
    ".....###........",
    "................",
    "..........###...",
    ".....B..........",
    "............D...",
    "................",
    "################",
    "################",
  ]),
];


const L3 = [
  
  placedRoom(0, 0, [
    "................",
    "....C...........",
    "................",
    "......###.......",
    "................",
    "......>...^.....",
    "......>...^.C...",
    "......>.........",
    "..........###...",
    "................",
    ".....B..........",
    "..........###...",
    "................",
    "S...............",
    "################",
    "################",
  ]),


  placedRoom(1, 0, [
    "................",
    "................",
    ".....C..........",
    "................",
    "....###.........",
    "................",
    ".....M.....V....",
    "................",
    "..........C.....",
    "................",
    "....###.........",
    "................",
    "..........###...",
    "................",
    "################",
    "################",
  ]),


  placedRoom(2, 0, [
    "#..##########..#",
    "#..............#",
    "#....C.........#",
    "#..............#",
    "#....####......#",
    "#..............#",
    "#......^^......#",
    "#......^^...C..#",
    "#..............#",
    "#....####......#",
    "#..............#",
    "#..............#",
    "#..........###.#",
    "#..........###.#",
    "#..............#",
    "#..##########..#",
  ]),


  placedRoom(2, 1, [
    "################",
    "################",
    "####........####",
    "####..C.....####",
    "####........####",
    "####....B...####",
    "####....^...####",
    "####....^..C####",
    "####....^...####",
    "####..###...####",
    "####........####",
    "####.....###.###",
    "####............",
    "####............",
    "################",
    "################",
  ]),

  
  placedRoom(3, 1, [
    "..<<.B..........",
    ".....C..........",
    "................",
    "......###.......",
    "................",
    "..........C.....",
    "................",
    ".....###........",
    "................",
    "...........###..",
    "................",
    "...B............",
    "............D...",
    "................",
    "################",
    "################",
  ]),
];


export const LEVELS = [
  { id: 1, name: "Level 1", rooms: L1, tutorial: true },
  { id: 2, name: "Level 2", rooms: L2, tutorial: false },
  { id: 3, name: "Level 3", rooms: L3, tutorial: false },
];
